import{j as t,u as N,b as q,I as P,P as I,r as d,am as C,ab as b}from"./index--svHLFhj.js";import{L as A}from"./LogoLoading-C_6Bo3vy.js";import{P as L}from"./Price-CQOyo4lI.js";const S={parse(s){return s.split("-").map(n=>{const a=n.match(/^(\d+)(.+)$/);return a?{quantity:Number(a[1]),id:a[2]}:null})}},E="_cart_1ul55_1",R="_title_1ul55_9",u={cart:E,title:R},k="_articles_6p6yv_1",T="_article_6p6yv_1",$="_name_6p6yv_67",z="_quantity_6p6yv_77",D="_image_6p6yv_85",c={articles:k,article:T,name:$,quantity:z,image:D},G=({articles:s,onClick:n,t:a})=>s?t.jsx("section",{className:c.articles,children:s.map((e,m)=>t.jsx(O,{article:e,onClick:()=>n(e),t:a},m))}):t.jsx("p",{children:a("empty")}),O=({article:s,onClick:n,t:a})=>s&&t.jsxs("article",{id:s.index,className:c.article,onClick:n,children:[t.jsx("p",{className:c.name,children:s.variant?.name??s.name}),t.jsx("div",{className:c.image,children:t.jsx("img",{className:c.img,src:s.variant?.images[0]?.src??s.images[0]?.src})}),t.jsxs("p",{children:[a("quantity")," ",t.jsx("span",{className:c.quantity,children:s.quantity})]}),s?.variant?.attributes.map(e=>t.jsx("p",{children:e?.valueName})),t.jsx(L,{multiplier:s.quantity,price:s.variant?.price??s.price,discount:s.variant?.discount??s.discount,installments:s.variant?.installments??s.installments,installmentsPrice:s.variant?.installmentsPrice??s.installmentsPrice,fees:s.variant?.fees??s.fees}),console.log("AGREGA LOS ATTRIBUTOS")]}),H=()=>{const{t:s,ready:n}=N("main/cart"),a=q(),{coinSymbol:e,dataLoaded:m}=P(),{"*":p}=I(),[x,y]=d.useState(),{getArticles:_,isLoading:v,params:h}=C();d.useEffect(()=>{const r=S.parse(p??h());_(r.map(i=>i.id)).then(i=>{i.map(o=>{const l=b.serialize(o.id,o.variant.id),g=r.find(f=>f.id==l);o.quantity=g?.quantity,o.index=l,o.currency=e}),y(i),console.log(i)}).catch(i=>{})},[]);const j=r=>{console.log(r),a(`/article/${r.index}`,{state:{from:location.pathname}})};return n&&t.jsxs("main",{className:u.cart,children:[t.jsx("h2",{className:u.title,children:s("cart")}),v||!m?t.jsx(A,{}):t.jsx(G,{articles:x,onClick:j,t:s})]})};export{H as default};
